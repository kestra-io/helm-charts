{{- if hasKey .Values "configuration" }}
{{ fail "The key .Values.configuration is not authorized anymore, please read migration process." }}
{{- end }}

{{- if and
      (or (not .Values.configurations.application) (eq (len .Values.configurations.application) 0))
      (or (not .Values.configurations.configmaps)  (eq (len .Values.configurations.configmaps) 0))
      (or (not .Values.configurations.secrets)     (eq (len .Values.configurations.secrets) 0)) }}
{{ fail "At least one of .configurations.application, .configurations.configmaps, or .configurations.secrets must be defined and non-empty" }}
{{- end }}
