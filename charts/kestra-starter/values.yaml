postgres:
  # -- see https://artifacthub.io/packages/helm/groundhog2k/postgres for all available configurations
  # @section -- PostgreSQL Configuration
  fullnameOverride: "kestra-starter-postgres"
  # -- see https://artifacthub.io/packages/helm/groundhog2k/postgres for all available configurations
  # @section -- PostgreSQL Configuration
  serviceAccount:
    create: true
  # -- see https://artifacthub.io/packages/helm/groundhog2k/postgres for all available configurations
  # @section -- PostgreSQL Configuration
  revisionHistoryLimit: 5
  # -- see https://artifacthub.io/packages/helm/groundhog2k/postgres for all available configurations
  # @section -- PostgreSQL Configuration
  settings:
    superuser:
      value: "postgres"
    superuserPassword:
      value: "SuperChangeMe#1234"
  # -- see https://artifacthub.io/packages/helm/groundhog2k/postgres for all available configurations
  # @section -- PostgreSQL Configuration
  userDatabase:
    name:
      value: "kestra"
    user:
      value: "kestra"
    password:
      value: "ChangeMe#1234"

minio:
  # -- see https://artifacthub.io/packages/helm/minio-official/minio for all available configurations
  # @section -- MinIO Configuration
  fullnameOverride: "kestra-starter-minio"
  # -- see https://artifacthub.io/packages/helm/minio-official/minio for all available configurations
  # @section -- MinIO Configuration
  mode: "standalone"
  # -- see https://artifacthub.io/packages/helm/minio-official/minio for all available configurations
  # @section -- MinIO Configuration
  rootUser: "root"
  # -- see https://artifacthub.io/packages/helm/minio-official/minio for all available configurations
  # @section -- MinIO Configuration
  rootPassword: "SuperChangeMe#1234"
  # -- see https://artifacthub.io/packages/helm/minio-official/minio for all available configurations
  # @section -- MinIO Configuration
  replicas: 1
  # -- see https://artifacthub.io/packages/helm/minio-official/minio for all available configurations
  # @section -- MinIO Configuration
  resources: {}
  # -- see https://artifacthub.io/packages/helm/minio-official/minio for all available configurations
  # @section -- MinIO Configuration
  deploymentUpdate:
    type: "Recreate"
  # -- see https://artifacthub.io/packages/helm/minio-official/minio for all available configurations
  # @section -- MinIO Configuration
  users:
    - accessKey: "console"
      secretKey: "console-1234"
      policy: "consoleAdmin"
    - accessKey: "kestra"
      secretKey: "kestra-1234"
      policy: "KestraWritePolicy"
  # -- see https://artifacthub.io/packages/helm/minio-official/minio for all available configurations
  # @section -- MinIO Configuration
  policies:
    - name: KestraWritePolicy
      statements:
        - effect: Allow
          resources:
            - 'arn:aws:s3:::kestra/*'
          actions:
            - "s3:*"
  # -- see https://artifacthub.io/packages/helm/minio-official/minio for all available configurations
  # @section -- MinIO Configuration
  buckets:
    - name: "kestra"
      policy: "public"
  svcaccts:
    - accessKey: "kestra-svcacct"
      secretKey: "kestra-svcacct-1234"
      user: "kestra"

kestra:
  fullnameOverride: "kestra-starter"
  common:
    revisionHistoryLimit: 5
  dind:
    enabled: true
    mode: "insecure"
  configurations:
    application:
      datasources:
        postgres:
          url: 'jdbc:postgresql://kestra-starter-postgres:5432/kestra'
          driverClassName: org.postgresql.Driver
          username: 'kestra'
          password: 'ChangeMe#1234'
      kestra:
        tutorialFlows:
          enabled: true
        queue:
          type: 'postgres'
        repository:
          type: 'postgres'
        storage:
          type: 'minio'
          minio:
            endpoint: 'kestra-starter-minio'
            port: '9000'
            access-key: 'kestra'
            secret-key: 'kestra-1234'
            secure: 'false'
            bucket: 'kestra'
